<Window x:Class="hotel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:hotel"
        mc:Ignorable="d"
        Title="MainWindow" Height="600" Width="1000"    
        WindowStyle="None"  WindowStartupLocation="CenterScreen"                    
        ResizeMode="NoResize" WindowState="Maximized"
        AllowsTransparency="True"
        Background="Transparent">

    <Window.Resources>
        <Style x:Key="TrafficLightButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="12" />
            <Setter Property="Height" Value="12" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="Cursor" Value="Hand" />

            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <!-- 
                           FIX 1: Give this Grid a name so the animation can find it.
                        -->
                        <Grid x:Name="RootGrid">
                            <Grid.RenderTransform>
                                <ScaleTransform ScaleX="1.0" ScaleY="1.0" />
                            </Grid.RenderTransform>
                            <Grid.RenderTransformOrigin>0.5, 0.5</Grid.RenderTransformOrigin>

                            <Ellipse x:Name="buttonEllipse" 
                                     Fill="{TemplateBinding Background}" />

                            <Path x:Name="buttonIcon"
                                  Data="{Binding Content, RelativeSource={RelativeSource TemplatedParent}}"
                                  Stroke="{TemplateBinding Foreground}"
                                  StrokeThickness="1.5"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"
                                  Opacity="0" />
                        </Grid>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="buttonIcon" Property="Opacity" Value="1" />

                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <!-- 
                                               FIX 2: Add Storyboard.TargetName="RootGrid" to all animations.
                                            -->
                                            <DoubleAnimation Storyboard.TargetName="RootGrid" 
                                                             Storyboard.TargetProperty="RenderTransform.ScaleX" To="1.3" Duration="0:0:0.2" />
                                            <DoubleAnimation Storyboard.TargetName="RootGrid" 
                                                             Storyboard.TargetProperty="RenderTransform.ScaleY" To="1.3" Duration="0:0:0.2" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>

                                <Trigger.ExitActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetName="RootGrid" 
                                                             Storyboard.TargetProperty="RenderTransform.ScaleX" To="1.0" Duration="0:0:0.2" />
                                            <DoubleAnimation Storyboard.TargetName="RootGrid" 
                                                             Storyboard.TargetProperty="RenderTransform.ScaleY" To="1.0" Duration="0:0:0.2" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.ExitActions>

                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border Background="White" CornerRadius="10">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="23*"/>
            </Grid.ColumnDefinitions>
            <DockPanel Height="25" VerticalAlignment="Top" Background="LightGray"
                       MouseLeftButtonDown="TopBar_MouseDown" Grid.ColumnSpan="2">

                <!-- 
                   FIX 1: Set the top margin to 0 so VerticalAlignment="Center" can work properly.
                -->
                <StackPanel Orientation="Horizontal" Margin="15,0,0,0" VerticalAlignment="Center">

                    <Button x:Name="CloseButton"
                            Click="CloseButton_Click"
                            Style="{StaticResource TrafficLightButtonStyle}"
                            Background="#FF5F57"
                            Foreground="#5E0000"
                            Margin="0,3,6 0"/>
                    <!-- FIX: Changed to Close icon character -->
                    <Button x:Name="MinimizeButton"
                            Click="MinimizeButton_Click"
                            Style="{StaticResource TrafficLightButtonStyle}"
                            Background="#FFBD2E"
                            Foreground="#6A4500"
                            Margin="0,3,6,0"/>
                    <!-- FIX 2: Changed Y from 6 to 5.5 to move it up -->
                    <Button x:Name="MaximizeButton"
                            Click="MaximizeButton_Click"
                            Style="{StaticResource TrafficLightButtonStyle}"
                            Background="#28C840"
                            Foreground="#004900"
                            Margin="0,3,6,0"/>
                </StackPanel>
            </DockPanel>


            <!-- main page content -->
            <Frame x:Name="MainFrame" 
                   Margin="0,25,0,0"  
                   NavigationUIVisibility="Hidden"
                   Background="Transparent" Grid.ColumnSpan="2"/>
        </Grid>
    </Border>
</Window>